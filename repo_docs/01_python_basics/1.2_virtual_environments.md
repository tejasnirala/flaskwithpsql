# ðŸ“¦ Virtual Environments Explained

> **Python's Version of node_modules**

---

## ðŸ“‹ What is a Virtual Environment?

A **virtual environment** is an isolated Python installation for your project. It keeps your project's dependencies separate from:

-   Your system Python
-   Other projects' dependencies

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    WITHOUT Virtual Environments                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   System Python (global)                                         â”‚
â”‚   â”œâ”€â”€ Flask 2.0                                                  â”‚
â”‚   â”œâ”€â”€ SQLAlchemy 1.4                                             â”‚
â”‚   â””â”€â”€ requests 2.25                                              â”‚
â”‚                                                                  â”‚
â”‚   Project A needs Flask 3.0 â†’ Conflict! ðŸ’¥                       â”‚
â”‚   Project B needs Flask 2.0 â†’ Works, but risky                   â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    WITH Virtual Environments                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   System Python (clean)                                          â”‚
â”‚                                                                  â”‚
â”‚   Project A/venv/              Project B/venv/                   â”‚
â”‚   â”œâ”€â”€ Flask 3.0               â”œâ”€â”€ Flask 2.0                     â”‚
â”‚   â”œâ”€â”€ SQLAlchemy 2.0          â”œâ”€â”€ SQLAlchemy 1.4                â”‚
â”‚   â””â”€â”€ requests 2.31           â””â”€â”€ Django 4.0                    â”‚
â”‚                                                                  â”‚
â”‚   âœ… No conflicts! Independent installations.                    â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ†š Node.js Comparison

| Concept           | Node.js             | Python                            |
| ----------------- | ------------------- | --------------------------------- |
| Dependency folder | `node_modules/`     | `venv/`                           |
| Package file      | `package.json`      | `requirements.txt`                |
| Lock file         | `package-lock.json` | `requirements.txt` (frozen)       |
| Install command   | `npm install`       | `pip install -r requirements.txt` |
| Add package       | `npm install flask` | `pip install Flask`               |
| Global install    | `npm install -g`    | `pip install` (without venv)      |

**Key Difference:** Node.js creates `node_modules` automatically. Python requires you to **create and activate** the virtual environment manually.

---

## ðŸ› ï¸ Creating a Virtual Environment

### Step 1: Create

```bash
# Navigate to your project
cd /path/to/your/project

# Create virtual environment
python3 -m venv venv
```

This creates a `venv/` folder containing:

```
venv/
â”œâ”€â”€ bin/                 # Executables (python, pip, activate)
â”‚   â”œâ”€â”€ activate         # Activation script
â”‚   â”œâ”€â”€ pip              # Local pip
â”‚   â””â”€â”€ python           # Local python
â”œâ”€â”€ include/             # C headers (for compiled packages)
â”œâ”€â”€ lib/                 # Installed packages
â”‚   â””â”€â”€ python3.9/
â”‚       â””â”€â”€ site-packages/
â””â”€â”€ pyvenv.cfg           # Configuration
```

### Step 2: Activate

**Mac/Linux:**

```bash
source venv/bin/activate
```

**Windows:**

```cmd
venv\Scripts\activate
```

After activation, your prompt changes:

```bash
# Before
user@computer:~/project$

# After
(venv) user@computer:~/project$
```

The `(venv)` prefix tells you the virtual environment is active.

### Step 3: Install Packages

```bash
# Now pip installs to venv, not globally
pip install Flask

# Install from requirements.txt
pip install -r requirements.txt
```

### Step 4: Deactivate (When Done)

```bash
deactivate
```

---

## ðŸ“Š How It Works

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PYTHON PATH RESOLUTION                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   Without venv:                                                  â”‚
â”‚   $ python                                                       â”‚
â”‚   â””â”€â”€ Uses: /usr/bin/python3                                     â”‚
â”‚       â””â”€â”€ Packages: /usr/lib/python3/site-packages               â”‚
â”‚                                                                  â”‚
â”‚   With venv activated:                                           â”‚
â”‚   (venv) $ python                                                â”‚
â”‚   â””â”€â”€ Uses: ./venv/bin/python                                    â”‚
â”‚       â””â”€â”€ Packages: ./venv/lib/python3.9/site-packages           â”‚
â”‚                                                                  â”‚
â”‚   The 'activate' script modifies your PATH to prioritize         â”‚
â”‚   the venv's Python and pip executables.                         â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

When you activate:

1. `PATH` environment variable is modified
2. `venv/bin/` is added to the front
3. Running `python` now uses `venv/bin/python`
4. Running `pip` now uses `venv/bin/pip`

---

## ðŸ“‹ Working with requirements.txt

### Creating requirements.txt

```bash
# Freeze current packages to file
pip freeze > requirements.txt
```

This creates:

```
Flask==3.0.0
Flask-SQLAlchemy==3.1.1
Jinja2==3.1.2
SQLAlchemy==2.0.23
Werkzeug==3.0.1
...
```

### Installing from requirements.txt

```bash
pip install -r requirements.txt
```

### Our Project's requirements.txt

```
# =============================================================================
# Flask Core and Extensions
# =============================================================================
Flask==3.0.0
Flask-SQLAlchemy==3.1.1
Flask-Migrate==4.0.5
flask-cors==4.0.0
flask-openapi3==3.1.3

# =============================================================================
# Authentication
# =============================================================================
Flask-JWT-Extended==4.6.0

# ... more packages
```

---

## ðŸ”„ Complete Workflow

### Starting a New Project

```bash
# 1. Create project folder
mkdir myproject && cd myproject

# 2. Create virtual environment
python3 -m venv venv

# 3. Activate it
source venv/bin/activate

# 4. Install packages
pip install Flask Flask-SQLAlchemy

# 5. Freeze requirements
pip freeze > requirements.txt

# 6. Add venv to .gitignore
echo "venv/" >> .gitignore
```

### Cloning an Existing Project

```bash
# 1. Clone the repo
git clone https://github.com/user/project.git
cd project

# 2. Create virtual environment
python3 -m venv venv

# 3. Activate it
source venv/bin/activate

# 4. Install dependencies
pip install -r requirements.txt

# 5. You're ready!
python run.py
```

---

## ðŸ“ What's in Our venv/

After installing packages for this project:

```
venv/lib/python3.9/site-packages/
â”œâ”€â”€ flask/                    # Flask framework
â”œâ”€â”€ flask_sqlalchemy/         # Flask-SQLAlchemy extension
â”œâ”€â”€ flask_migrate/            # Database migrations
â”œâ”€â”€ flask_jwt_extended/       # JWT authentication
â”œâ”€â”€ flask_limiter/            # Rate limiting
â”œâ”€â”€ flask_cors/               # CORS handling
â”œâ”€â”€ sqlalchemy/               # Database ORM
â”œâ”€â”€ pydantic/                 # Data validation
â”œâ”€â”€ werkzeug/                 # WSGI utilities (Flask dependency)
â”œâ”€â”€ jinja2/                   # Template engine
â”œâ”€â”€ click/                    # CLI framework
â””â”€â”€ ... many more
```

---

## âš ï¸ Important Rules

### 1. Never Commit venv/

```gitignore
# .gitignore
venv/
```

Why? Because:

-   It's huge (100MB+)
-   It's platform-specific (Mac vs Windows vs Linux)
-   `requirements.txt` is enough to recreate it

### 2. Always Activate Before Working

```bash
# Wrong - installs globally!
pip install something

# Correct - installs to project
source venv/bin/activate
pip install something
```

### 3. Keep requirements.txt Updated

```bash
# After adding a new package
pip install new-package
pip freeze > requirements.txt
git add requirements.txt
git commit -m "Add new-package dependency"
```

### 4. Use the Same Python Version

If you created venv with Python 3.9, use Python 3.9:

```bash
python3.9 -m venv venv
```

---

## ðŸ†š venv vs virtualenv vs conda

| Tool         | Description                | Use When                           |
| ------------ | -------------------------- | ---------------------------------- |
| `venv`       | Built into Python 3.3+     | Default choice, simple projects    |
| `virtualenv` | Third-party, more features | Need Python 2 support              |
| `conda`      | Anaconda ecosystem         | Data science, complex dependencies |
| `poetry`     | Modern package manager     | Dependency resolution, publishing  |
| `pipenv`     | Combines pip + virtualenv  | Alternative workflow               |

**For this project:** We use `venv` because it's simple and built-in.

---

## ðŸ”§ Useful Commands

| Command                           | Description                  |
| --------------------------------- | ---------------------------- |
| `python -m venv venv`             | Create virtual environment   |
| `source venv/bin/activate`        | Activate (Mac/Linux)         |
| `deactivate`                      | Deactivate                   |
| `pip install package`             | Install a package            |
| `pip install -r requirements.txt` | Install from file            |
| `pip freeze`                      | Show installed packages      |
| `pip freeze > requirements.txt`   | Save to file                 |
| `pip list`                        | List packages (nicer format) |
| `pip show flask`                  | Show package details         |
| `pip uninstall flask`             | Remove a package             |
| `which python`                    | Show which Python is active  |

---

## ðŸ§ª Quick Check

How do you know if venv is active?

```bash
# Check 1: Look for (venv) in prompt
(venv) user@computer:~/project$

# Check 2: Check which Python
which python
# Should show: /path/to/project/venv/bin/python

# Check 3: Check pip location
which pip
# Should show: /path/to/project/venv/bin/pip
```

---

## ðŸ”œ Next Steps

Now you understand how Python manages dependencies. Next, let's learn how Python's import system works.

**Next: [1.3_imports_and_modules.md](./1.3_imports_and_modules.md)** - How Python imports and modules work.
