# ğŸ” Authentication Overview

> **Understanding Authentication vs Authorization**

---

## ğŸ“‹ What This Section Covers

This section explains how authentication and authorization work in our Flask application:

1. **Authentication** - "Who are you?" (Login, tokens)
2. **Authorization** - "What can you do?" (Permissions, roles)

---

## ğŸ¯ Authentication vs Authorization

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           AUTHENTICATION vs AUTHORIZATION                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   AUTHENTICATION (AuthN)                                         â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                         â”‚
â”‚   â€¢ "Who are you?"                                               â”‚
â”‚   â€¢ Verify identity                                              â”‚
â”‚   â€¢ Login process                                                â”‚
â”‚   â€¢ Credentials: email/password, tokens                          â”‚
â”‚   â€¢ Result: Authenticated user or rejection                      â”‚
â”‚                                                                  â”‚
â”‚   Examples:                                                      â”‚
â”‚   â€¢ User logs in with email and password                         â”‚
â”‚   â€¢ API call includes valid JWT token                            â”‚
â”‚   â€¢ OAuth login with Google/GitHub                               â”‚
â”‚                                                                  â”‚
â”‚   AUTHORIZATION (AuthZ)                                          â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                           â”‚
â”‚   â€¢ "What can you do?"                                           â”‚
â”‚   â€¢ Check permissions                                            â”‚
â”‚   â€¢ After authentication                                         â”‚
â”‚   â€¢ Roles: admin, user, moderator                                â”‚
â”‚   â€¢ Result: Access granted or denied                             â”‚
â”‚                                                                  â”‚
â”‚   Examples:                                                      â”‚
â”‚   â€¢ Only admins can delete users                                 â”‚
â”‚   â€¢ Users can only edit their own profile                        â”‚
â”‚   â€¢ Moderators can approve content                               â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ†š Express.js Comparison

| Concept          | Express.js        | Flask                        |
| ---------------- | ----------------- | ---------------------------- |
| JWT Library      | `jsonwebtoken`    | Flask-JWT-Extended           |
| Middleware       | `passport.js`     | Decorators (`@jwt_required`) |
| Password Hashing | `bcrypt`          | `werkzeug.security`          |
| Session-based    | `express-session` | Flask-Login (not used here)  |

---

## ğŸ”‘ Our Authentication Approach

We use **JWT (JSON Web Tokens)** for stateless authentication:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   WHY JWT?                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   SESSION-BASED (Traditional)           JWT-BASED (Our Choice)  â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                                  â”‚
â”‚   Client        Server                   Client        Server    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”   â”‚
â”‚   â”‚ ğŸª â”‚ â”€â”€â”€â”€â”€â”€â–¶â”‚Session â”‚               â”‚ ğŸŸï¸ â”‚ â”€â”€â”€â”€â”€â”€â–¶â”‚    â”‚   â”‚
â”‚   â”‚Cookieâ”‚       â”‚ Store â”‚               â”‚Tokenâ”‚       â”‚Verifyâ”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”˜   â”‚
â”‚                      â”‚                                    â”‚      â”‚
â”‚   Server must store  â”‚                   Token is        â”‚      â”‚
â”‚   session data       â”‚                   self-contained  â”‚      â”‚
â”‚                      â”‚                                    â”‚      â”‚
â”‚   âŒ Doesn't scale   â”‚                   âœ… Stateless    â”‚      â”‚
â”‚   âŒ Server memory   â”‚                   âœ… Scales well  â”‚      â”‚
â”‚   âŒ Sticky sessions â”‚                   âœ… Mobile-friendly     â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Authentication Flow (High Level)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AUTHENTICATION FLOW                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   1. USER REGISTERS                                              â”‚
â”‚      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                           â”‚
â”‚      POST /api/v1/users/register                                 â”‚
â”‚      â€¢ Username, email, password                                 â”‚
â”‚      â€¢ Password is hashed (PBKDF2)                               â”‚
â”‚      â€¢ User saved to database                                    â”‚
â”‚                                                                  â”‚
â”‚   2. USER LOGS IN                                                â”‚
â”‚      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                              â”‚
â”‚      POST /api/v1/auth/login                                     â”‚
â”‚      â€¢ Email + password                                          â”‚
â”‚      â€¢ Server verifies credentials                               â”‚
â”‚      â€¢ Returns access_token + refresh_token                      â”‚
â”‚                                                                  â”‚
â”‚   3. USER MAKES API REQUESTS                                     â”‚
â”‚      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                     â”‚
â”‚      GET /api/v1/users/me                                        â”‚
â”‚      â€¢ Includes: Authorization: Bearer <access_token>            â”‚
â”‚      â€¢ Server validates token                                    â”‚
â”‚      â€¢ Server returns user data                                  â”‚
â”‚                                                                  â”‚
â”‚   4. TOKEN EXPIRES                                               â”‚
â”‚      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                              â”‚
â”‚      POST /api/v1/auth/refresh                                   â”‚
â”‚      â€¢ Includes: Authorization: Bearer <refresh_token>           â”‚
â”‚      â€¢ Server issues new tokens                                  â”‚
â”‚                                                                  â”‚
â”‚   5. USER LOGS OUT                                               â”‚
â”‚      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                               â”‚
â”‚      POST /api/v1/auth/logout                                    â”‚
â”‚      â€¢ Token is blacklisted                                      â”‚
â”‚      â€¢ Client discards tokens                                    â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ Our Authentication Structure

```
app/
â”œâ”€â”€ auth/
â”‚   â”œâ”€â”€ __init__.py          # JWT setup, helper functions
â”‚   â””â”€â”€ v1/
â”‚       â”œâ”€â”€ __init__.py
â”‚       â””â”€â”€ routes.py        # Auth endpoints (login, logout, etc.)
â”‚
â”œâ”€â”€ models/
â”‚   â””â”€â”€ user.py              # User model with password hashing
â”‚
â””â”€â”€ schemas/
    â””â”€â”€ user.py              # UserLoginSchema, etc.
```

---

## ğŸ”§ Key Components

| Component   | File                    | Purpose                        |
| ----------- | ----------------------- | ------------------------------ |
| JWT Setup   | `app/auth/__init__.py`  | Initialize Flask-JWT-Extended  |
| Auth Routes | `app/auth/v1/routes.py` | Login, logout, refresh, me     |
| User Model  | `app/models/user.py`    | Password hashing, verification |
| Config      | `config.py`             | Token expiration times         |

---

## ğŸ” Security Features

Our implementation includes:

| Feature                | Implementation                  |
| ---------------------- | ------------------------------- |
| **Password Hashing**   | PBKDF2 with salt (werkzeug)     |
| **Token Expiration**   | Access: 15min, Refresh: 30 days |
| **Token Blacklisting** | Revoke tokens on logout         |
| **Secure Headers**     | JWT in Authorization header     |
| **Rate Limiting**      | Prevent brute-force attacks     |

---

## ğŸ“‹ API Endpoints Summary

| Method | Endpoint                 | Auth Required | Description      |
| ------ | ------------------------ | ------------- | ---------------- |
| POST   | `/api/v1/users/register` | âŒ            | Create account   |
| POST   | `/api/v1/auth/login`     | âŒ            | Get tokens       |
| POST   | `/api/v1/auth/logout`    | âœ… Access     | Revoke token     |
| POST   | `/api/v1/auth/refresh`   | âœ… Refresh    | Get new tokens   |
| GET    | `/api/v1/auth/me`        | âœ… Access     | Get current user |

---

## ğŸ”œ Next Steps

Let's dive deeper into how JWT works.

**Next: [5.2_jwt_explained.md](./5.2_jwt_explained.md)** - Understanding JSON Web Tokens.
